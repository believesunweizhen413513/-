<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Pragma" content="no-cache">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            width: 100%
        }

        ;

        ul,
        li {
            list-style: none
        }

        ;

        ul {
            width: 100%;
        }

        li {
            width: 24%;
            height: 300px;
            display: inline-block;
            margin-right: 20px;
            border: 1px solid #ededed;
            margin-bottom: 20px;
        }
        li img{width: 100%;
        height: 200px;
        }
    </style>
</head>
<script src="../js/comm1.js"></script>
<body>
    <ul id="list">
        <!-- <li>
            <img src="https://img.alicdn.com/tfscom/i4/1710310361/TB26nK5bgCYW1JjSZFCXXcxLVXa_!!1710310361.jpg_460x460xz.jpg"
                alt="">
            <p>中长款高领套头针织衫秋冬新款宽松保暖加厚长袖女毛衣外套1</p>
            <p>价格：190</p>
        </li> -->
    </ul>
</body>
<script>
    /*
       数据渲染：
           前端：
               * 结构html写好，css写好，删除重复的结构保留一个即可
               * 发送ajax，获取数据，数据渲染
           后端：
               * 写接口：查询数据库，把数据做好，发给前端
           
           缓存的解决：如果两次请求的是通过url的资源，浏览器本身就会帮你缓存；
               * 在network里面勾选去除缓存 disable cache
               * 手动清除：ctrl + f5
               * 清除浏览数据
               * 改变url：加时间到参数里面   url?time=时间戳&name=jingjing&tel=231231
               * 添加meta去除缓存：<meta http-equiv="Pragma" content="no-cache">
   */


    (function () {
        // 获取节点
        let list = document.getElementById('list');
        // 发送ajax
        function init() {
            ajax({
                type: 'get',
                url: '../api/data.php',
                success: str => {
                    creatdata(str);//字符串形式
                }
            });
            function creatdata(str) {
                // console.log(str);
                
                let arr = JSON.parse(str);//将字符串转成数组
                // 拼接数据，渲染
                // console.log(str);
                let html = arr.map(item => {
                    return `<li data-id="${item.id}">
                                <img src="${item.url}"
                                    alt="">
                                <p>${item.name}</p>
                                <p>价格：${item.price}</p>
                            </li>`;
                }).join('');
                list.innerHTML = html;
            }
        }
        init();
    })();
</script>

</html>