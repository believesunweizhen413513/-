<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>动画回到顶部</title>
    <style>
        body {
            height: 2000px;
        }

        #totop {
            width: 100px;
            height: 100px;
            background-size: contain;
            color: #fff;
            position: fixed;
            right: 20px;
            bottom: 20px;
            text-align: center;
            /* display: none; */
        }

        img {
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div id="totop">
        <img src="../img/22.jpg" alt="">
    </div>
</body>
<script>
    // 获取节点
    var totop = document.getElementById("totop");
    // 设置滚动事件
    (function () {
        window.onscroll = function () {
            // 获取高度
            var scrollY = window.scrollY;
            if (scrollY >= 300) {
                totop.style.display = "block";
            }
            else {
                // totop.style.display = "none"
            }
            // 点击按钮的时候让它缓慢的回到顶部
            totop.onclick = function () {
                // 缓慢回到，就要想到设置定时器
                var scrollY = window.scrollY;
                var timer1 = setInterval(function () {
                    var speed = parseInt(scrollY / 5);
                    scrollY -= speed;
                    // scrollY-=40;
                    if (speed <= 0) {
                        scrollY = 0;
                        clearInterval(timer1);
                    }
                    // console.log(speed, scrollY);
                    window.scrollTo(0, speed);

                }, 30);
                var height = 20;
                var timer2 = setInterval(function () {
                    if (scrollY > 0) {
                        height += 20;
                        totop.style.bottom = height + 'px';
                        totop.style.opacity = 0.5;
                    } else if (scrollY <= 0) {
                        totop.style.display = "none";
                        totop.style.bottom = 20 + 'px';
                        clearInterval(timer2);
                    }

                }, 30);
            }
        }
        setTimeout(function () {
            window.scroll(0, 0);
        }, 0);
    })();
</script>

</html>