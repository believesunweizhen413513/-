<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../font_1363862_yavkjldrnm/iconfont.css">
    <link rel="stylesheet" href="../font_1364609_baeavrjy1jo/iconfont.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/02淘宝网页.css">
    <link rel="stylesheet" href="../css/详情.css">
</head>

<body>
    <div id="box">
        <!-- <div class="bot">
            <div class="content">
                <div id="left">
                    <div id="btp">
                        <img id="bigpic" src="../img/tb1.jpg" alt="">
                        <div id="bean"></div>
                    </div>
                    <div id="btb">
                        <img class="active" src="../img/tb1.jpg" alt="">
                        <img src="../img/list2.gif" alt="">
                        <img src="../img/lsy.gif" alt="">
                    </div>
                    <p class="collect">
                        <i></i>
                        <span>收藏宝贝</span>
                        <span>(435人气)</span>
                    </p>
                    <div id="show"></div>
                </div>
                <div class="right">
                    <div class="title">
                        <h2>副科级反对浪费离开的法律框架房领导来看回复对方电话发动机的客户得快里的方法</h2>
                        <p class="shop">海量新品，潮流穿搭，玩趣互动</p>
                    </div>
                    <div class="right-top">
                        <div class="right-top1">
                            <span class="right-span1">价格</span>
                            <span class="right-span2"><del>￥199.00-229.00</del></span>
                            <p class="right-p1">
                                <span class="p1-span1">3245</span>
                                <span class="p1-span2">累计评论</span>
                            </p>
                            <p class="right-p2">
                                <span class="p2-span1">63</span>
                                <span class="p2-span2">交易成功</span>
                            </p>
                        </div>
                        <div class="right-top2">
                            <span class="right-span1">淘宝价</span>
                            <span class="right-span2">￥189.05-217.55</span>
                            <span class="right-span3">心动价</span>
                        </div>
                    </div>
                    <div class="right-skin">
                        <div class="size">
                            <span class="sz1">尺寸</span>
                            <i>M</i>
                            <i>L</i>
                        </div>
                        <div class="corlo">
                            <span class="cl">颜色分类</span>
                            <i>黑色</i>
                        </div>
                        <div class="num">
                            <span class="nu">数量</span>
                            <input type="button" id="cut" value="-">
                            <input type="text" id="tex" value="1">
                            <input type="button" id="add" value="+">
                            <i>件(库存7件)</i>
                        </div>
                        <div class="jg">
                            <span class="ljgm">立即购买</span>
                            <span class="jrgwc"> <i class="ic iconfont icon-gouwuche"></i>加入购物车</span>
                        </div>
                    </div>

                </div>
                <div class="asize">
                    <h4>看了又看————</h4>
                    <ul>
                        <li><img src="../img/lin44.gif" alt="">
                            <p>￥189</p>
                        </li>
                        <li><img src="../img/lin44.gif" alt="">
                            <p>￥3449</p>
                        </li>
                        <li><img src="../img/lin44.gif" alt="">
                            <p>￥4459</p>
                        </li>

                    </ul>
                </div>
            </div>

        </div>
        <div class="xuanxiang">
            <div class="content">
                <div class="sousuo"></div>
                <div id="xq">

                    <ul id="list1">

                        <li class="active">宝贝详情</li>
                        <li>累计评价</li>
                        <li>专享服务</li>
                    </ul>
                    <div class="con" style="display: block">
                        <ul>
                            <li class="active">宝贝详情</li>
                            <li>品牌: XMO</li>
                            <li>适用年龄: 25-29周岁</li>
                            <li>尺码: M L </li>
                            <li>面料: 其他</li>
                            <li>图案: 条纹</li>
                            <li>风格: 通勤</li>
                            <li>通勤: 淑女</li>
                            <li>领型: POLO领</li>
                            <li>腰型: 高腰</li>
                            <li>衣门襟: 单排扣</li>
                            <li>颜色分类: 绿色 白色</li>
                            <li>袖型: 常规</li>
                            <li>组合形式: 单件</li>
                            <li>货号: 51912</li>
                            <li>裙型: A字裙</li>
                            <li>年份季节: 2019年秋季</li>
                            <li>袖长: 九分袖</li>
                            <li>裙长: 中长裙</li>
                            <li>流行元素/工艺: 拼接</li>
                            <li>款式: 其他/other</li>
                            <li>销售渠道类型: 纯电商(只在线上销售)</li>
                        </ul>
                    </div>
                     <div class="con" style="display: none">
                        <ul>
                            <li class="active">宝贝详情</li>
                            <li>品牌: XMO</li>
                            <li>适用年龄: 25-29周岁</li>
                            <li>尺码: M L </li>
                            <li>面料: 其他</li>
                            <li>图案: 条纹</li>
                            <li>风格: 通勤</li>
                            <li>通勤: 淑女</li>
                            <li>领型: POLO领</li>
                            <li>腰型: 高腰</li>
                            <li>衣门襟: 单排扣</li>
                            <li>颜色分类: 绿色 白色</li>
                            <li>袖型: 常规</li>
                            <li>组合形式: 单件</li>
                            <li>年份季节: 2019年秋季</li>
                            <li>袖长: 九分袖</li>
                            <li>裙长: 中长裙</li>
                            <li>流行元素/工艺: 拼接</li>
                            <li>款式: 其他/other</li>
                            <li>销售渠道类型: 纯电商(只在线上销售)</li>
                        </ul>
                    </div>
                    <div class="con" style="display: none">3</div>
                </div> 


            </div> -->
    </div>
</body>
<script>
    (function () {
        // var data = [
        //     {
        //         bigpic: "../img/tb1.jpg",
        //         btimg: ["../img/tb1.jpg", "../img/list2.gif", "../img/lsy.gif"],
        //         collect: "435",
        //         title: "副科级反对浪费离开的法律框架房领导来看回复对方电话发动机的客户得快里的方法",
        //         shop: "海量新品，潮流穿搭，玩趣互动",
        //         jiage: "价格",
        //         priceold: "199.00-229.00",
        //         pinglun: "3245",
        //         leiji: "累计评论",
        //         count: "63",
        //         acuss: "交易成功",
        //         taobao: "淘宝价",
        //         pricenew: "189.05-217.55",
        //         xindong: "心动价",
        //         size1: "M",
        //         size2: "L",
        //         corlo: "黑色",
        //         kucun: "7",
        //         buy: "立即购买",
        //         gwc: "加入购物车",

        //         h4: "看了又看————",
        //         img1: "../img/lin44.gif",
        //         img2: "../img/lin44.gif",
        //         img3: "../img/lin44.gif",
        //         aprice1: "189",
        //         aprice2: "3449",
        //         aprice3: "4459",

        //         li1: "宝贝详情",
        //         li2: "累计评价",
        //         li3: "专享服务",
        //     }
        // ]
        // console.log(location.search);
        var gain = decodeURI((location.search).slice(1));
		// console.log(gain);//
		// 将字符串转成对象，然后进行截取
        function strtoobj(str) {
			// 定义一个空对象
			var val = {};
			// 创建一个数组，把对象按照&分割
			var arr1 = gain.split("&");
			// 遍历数组arr1，以=作为分割
			for (var i = 0; i < arr1.length; i++) {
				var arr2 = arr1[i].split("=");
				val[arr2[0]] = [arr2[1]];//把下标为0的元素作为属性，1 的作为属性值
			}
			// console.log(val);
			return val;
		}
        // 入口，把数据传进去
		var data = strtoobj(gain);
        // console.log(data);
        // 小图对大图要一对一，在传过来的数组里面，不能直接切割，要用新的字符串装起来，然后对新的字符串拼接，再赋值回去。
        var str1=data.imglist;
        console.log(str1);
        var arr=str1[0].split(',');
        console.log(arr);
        data.imglist=arr;
        var html = "";
        for (var i in data) {
            // var str1 = '';//用来拼接小图字符串
            // for (var j in data[i].btimg) {
            //     str1 += `<img class="smpic" src="${data[i].btimg[j]}" alt="">`;
            // }
            var str = '';//用来拼接小图字符串
            for (var j in data.imglist) {
                str += `<img class="smpic" src="${data.imglist[j]}" alt="">`;
            }

            html = `
        <div class="bot">
            <div class="content">
                <div id="left">
                    <div id="btp">
                        <img class="bigpic" src=${data.bigpic} alt="">
                        <div id="bean"></div>
                    </div>
                    <div id="btb">
                        ${str}
                    </div>
                    <p class="collect">
                        <i></i>
                        <span>收藏宝贝</span>
                        <span>(${data.collect}人气)</span>
                    </p>
                    <div id="show"></div>
                </div>
                <div class="right">
                    <div class="title">
                        <h2>${data.title}</h2>
                        <p class="shop">${data.shop}</p>
                    </div>
                    <div class="right-top">
                        <div class="right-top1">
                            <span class="right-span1">${data.jiage}</span>
                            <span class="right-span2"><del>￥${data.priceold}</del></span>
                            <p class="right-p1">
                                <span class="p1-span1">${data.pinglun}</span>
                                <span class="p1-span2">${data.leiji}</span>
                            </p>
                            <p class="right-p2">
                                <span class="p2-span1">${data.count}</span>
                                <span class="p2-span2">${data.acuss}</span>
                            </p>
                        </div>
                        <div class="right-top2">
                            <span class="right-span1">${data.taobao}</span>
                            <span class="right-span2">￥${data.pricenew}</span>
                            <span class="right-span3">${data.xindong}</span>
                        </div>
                    </div>
                    <div class="right-skin">
                        <div class="size">
                            <span class="sz1">尺寸</span>
                            <i>${data.size1}</i>
                            <i>${data.size2}</i>
                        </div>
                        <div class="corlo">
                            <span class="cl">颜色分类</span>
                            <i>${data.corlo}</i>
                        </div>
                        <div class="num">
                            <span class="nu">数量</span>
                            <input type="button" id="cut" value="-" >
                            <input type="text" id="tex" value="1">
                            <input type="button" id="add" value="+">
                            <i>件(库存${data.kucun}件)</i>
                        </div>
                        <div class="jg">
                            <span class="ljgm">${data.buy}</span>
                            <span class="jrgwc"> <i class="ic iconfont icon-gouwuche"></i>${data.gwc}</span>
                        </div>
                    </div>

                </div>
                <div class="asize">
                    <h4>${data.h4}</h4>
                    <ul>
                        <li><img src=${data.img1} alt="">
                            <p>￥${data.aprice1}</p>
                        </li>
                        <li><img src=${data.img2} alt="">
                            <p>￥${data.aprice2}</p>
                        </li>
                        <li><img src=${data.img3} alt="">
                            <p>￥${data.aprice3}</p>
                        </li>

                    </ul>
                </div>
            </div>

        </div>
        <div class="xuanxiang">
            <div class="content">
                <div class="sousuo"></div>
                <div id="xq">

                    <ul id="list1">
                        <li class="active">${data.li1}</li>
                        <li>${data.li2}</li>
                        <li>${data.li3}</li>
                    </ul>
                    <div class="con" style="display: block">
                        <ul>
                            <li class="active">宝贝详情</li>
                            <li>品牌: XMO</li>
                            <li>适用年龄: 25-29周岁</li>
                            <li>尺码: M L </li>
                            <li>面料: 其他</li>
                            <li>图案: 条纹</li>
                            <li>风格: 通勤</li>
                            <li>通勤: 淑女</li>
                            <li>领型: POLO领</li>
                            <li>腰型: 高腰</li>
                            <li>衣门襟: 单排扣</li>
                            <li>颜色分类: 绿色 白色</li>
                            <li>袖型: 常规</li>
                            <li>组合形式: 单件</li>
                            <li>货号: 51912</li>
                            <li>裙型: A字裙</li>
                            <li>年份季节: 2019年秋季</li>
                            <li>袖长: 九分袖</li>
                            <li>裙长: 中长裙</li>
                            <li>流行元素/工艺: 拼接</li>
                            <li>款式: 其他/other</li>
                            <li>销售渠道类型: 纯电商(只在线上销售)</li>
                        </ul>
                    </div>
                    <div class="con" style="display: none">
                        <ul>
                            <li class="active">宝贝详情</li>
                            <li>品牌: XMO</li>
                            <li>适用年龄: 25-29周岁</li>
                            <li>尺码: M L </li>
                            <li>面料: 其他</li>
                            <li>图案: 条纹</li>
                            <li>风格: 通勤</li>
                            <li>通勤: 淑女</li>
                            <li>领型: POLO领</li>
                            <li>腰型: 高腰</li>
                            <li>衣门襟: 单排扣</li>
                            <li>颜色分类: 绿色 白色</li>
                            <li>袖型: 常规</li>
                            <li>组合形式: 单件</li>
                            <li>年份季节: 2019年秋季</li>
                            <li>袖长: 九分袖</li>
                            <li>裙长: 中长裙</li>
                            <li>流行元素/工艺: 拼接</li>
                            <li>款式: 其他/other</li>
                            <li>销售渠道类型: 纯电商(只在线上销售)</li>
                        </ul>
                    </div>
                    <div class="con" style="display: none">3</div>
                </div>


            </div>
        `
        }
        var box = document.getElementById("box");
        box.innerHTML = html;
       

        // 选项卡
        var xq = document.getElementById('xq');
        var list1 = document.getElementById('list1');
        var abtns = list1.getElementsByTagName('li');
        var acons = document.getElementsByClassName('con');
        for (let i = 0; i < abtns.length; i++) {
            (function (i) {
                abtns[i].index = i;
                abtns[i].onclick = function () {
                    for (let j = 0; j < abtns.length; j++) {
                        abtns[j].className = '';//全部都先清空类名
                        acons[j].style.display = "none";
                    }
                    this.className = 'active';
                    acons[this.index].style.display = 'block';
                }
            })(i)

        }
        // 吸顶
        var xq = document.getElementById("xq");
        var top = xq.offsetTop;
        window.onscroll = function () {
            var scrollTop = window.scrollY;
            if (scrollTop >= top) {
                xq.className = 'now';//当达到临界点就添加样式
            } else {
                xq.className = '';
            }
        }
        // 数量加减
        var cut = document.getElementById("cut");
        var add = document.getElementById("add");
        var tex = document.getElementById("tex");
        // var val = tex.value * 1;
        var n = tex.value;
        cut.onclick = function () {
            if (n > 1) {
                n--;
                tex.value = n;
            } else {
                alert("至少1件");
            }
        }
        tex.onclick = function () {
            var num = tex.value * 1; //拿到的value是字符串
            if (num < 1) { //下限控制
                num = 1;
            } else if (num > 7) { //上线的控制
                alert("不能大于7");
                num = 7;
            }
            tex.value = num; //设置value控制范围
        }
        add.onclick = function () {
            if (n < 7) {
                n++;
                tex.value = n;
            } else {
                alert("最多只能选7件");
            }
        }

        // 小图切换大图
        var left = document.getElementById("left");
        var bigpic = document.getElementById('bigpic');
        var btp = document.getElementById("btp")
        var btb = document.getElementById("btb")
        var smallpics = btb.getElementsByTagName('img');//集合
        // for (var i = 0; i < smallpics.length; i++) {//初始化样式
        //     smallpics[i].children[0].className = 'smpic active';//每一个父节点的第一个孩子高亮显示
        // }
        // var asmlPics = list.getElementsByClassName('smpic');
        for (var i = 0; i < smallpics.length; i++) {
            smallpics[i].onclick = function () {
                this.parentNode.previousElementSibling.children[0].src = this.src;
                for (var i = 0; i < this.parentNode.children.length; i++) {
                    this.parentNode.children[i].className = 'active';
                }
                for (var j = 0; j < smallpics.length; j++) {
                    smallpics[j].className = '';
                }
                this.parentNode.children[i].src = this.src;
                this.className = 'active';
            }
        }
        // 图片放大
        // var show = document.getElementById("show");
        // var bean = document.getElementById("bean");
        // var bigpic = document.getElementById("bigpic");
        // var btp = document.getElementById("btp");
        // var num = 2;

        // btp.onmousemove = function (event) {
        //     bean.style.width = 300 / num + 'px';
        //     bean.style.height = 300 / num + 'px';

        //     var x = event.clientX - btp.offsetLeft - bean.offsetWidth / 2;
        //     var y = event.clientY - btp.offsetTop - bean.offsetHeight / 2;

        //     var maxX = btp.clientWidth - bean.clientWidth;
        //     var maxY = btp.clientHeight - bean.clientHeight;

        //     if (x > maxX) {
        //         x = maxX;
        //     }
        //     if (x < 0) {
        //         x = 0;
        //     }
        //     if (y > maxY) {
        //         y = maxY;
        //     }
        //     if (y < 0) {
        //         y = 0;
        //     }
        //     // console.log("X coords: " + x + ", Y coords: " + y);

        //     bean.style.top = y + 'px';
        //     bean.style.left = x + 'px';

        //     show.style.backgroundImage = 'url(../img/tb1.jpg)';
        //     show.style.backgroundSize = `${num * 100}% ${num * 100}%`;
        //     show.style.backgroundPositionX = -x * num + 'px';
        //     show.style.backgroundPositionY = -y * num + 'px';

        //     console.log(`${num * 100}% ${num * 100}%`);
        //     console.log(-x * num + 'px', -y * num + 'px')
        // }

        // btp.onmouseenter = function () {
        //     bean.style.display = 'block';
        //     show.style.display = 'block';

        // }
        // btp.onmouseleave = function () {
        //     bean.style.display = 'none';
        //     show.style.display = 'none';
        // }
    })();
</script>

</html>