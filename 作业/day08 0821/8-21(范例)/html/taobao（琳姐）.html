<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../css/1.css">

</head>

<body>
    <div id="taobao">
        <ul id="list">
            <!-- <li>
                <div class="main">
                    <img class="bigimg" src="../images/O1CN01Fx9mD221hpjMZTPoF_!!0-saturn_solar.jpg_220x220.jpg_.webp"
                        alt="">
                    <span class="mark"></span>
                </div>

                <div class="smallimg">
                    <img class="active" src="../images1/O1CN01xtRehr2CHguXixciJ_!!137228449.jpg" alt="">
                </div>
                <h4>￥186.00</h4>

                <p><a href="">8/20 0点上新安妮陈长袖法式桔</a></p>
                <p>
                    <span>安妮陈旗舰店</span>
                    <span>2人付款</span>
                </p>
                <p><span>4.8</span> </p>

            </li> -->
        </ul>
    </div>
</body>
<script>
    (function () {

        var list = document.getElementById('list');
        var data = [{
            imglist: ['../images/O1CN01Fx9mD221hpjMZTPoF_!!0-saturn_solar.jpg_220x220.jpg_.webp', '../images1/O1CN01MyTF632CHguiujgfI_!!0-item_pic.jpg', '../images1/O1CN01xtRehr2CHguXixciJ_!!137228449.jpg'],
            price: '186.00',
            title: '8/20 0点上新安妮陈长袖法式桔',
            shopname: '安妮陈旗舰店',
            buyed: '2',
            grade: '4.8',
            aurl: './qietu.html'
        },
        {
            imglist: ['../images/O1CN01ahdCJh1QrmZDQpiyu_!!0-saturn_solar.jpg_220x220.jpg_.webp', '../images/O1CN01aoNqRl1JaeRPSDH25_!!0-saturn_solar.jpg_220x220.jpg_.webp', '../images/O1CN01bPb7N61WDNJJfmYEY_!!0-saturn_solar.jpg_220x220.jpg_.webp'],
            price: '186.00',
            title: '8/20 0点上新安妮陈长袖法式桔',
            shopname: '安妮陈旗舰店',
            buyed: '2',
            grade: '4.8',
            aurl: './qietu.html'
        },
        {
            imglist: ['../images/O1CN01dBbU0X1CofESkc9Zl_!!0-saturn_solar.jpg_220x220.jpg_.webp', '../images/O1CN01e6RKWo1MZE3Z5S7zk_!!0-saturn_solar.jpg_220x220.jpg_.webp'],
            price: '186.00',
            title: '8/20 0点上新安妮陈长袖法式桔',
            shopname: '安妮陈旗舰店',
            buyed: '2',
            grade: '4.8',
            aurl: './qietu.html'
        }
        ];

        //1.渲染数据到页面
        var html = '';//准备用于拼接字符串的变量
        for (var i in data) {
            //data[i]==对象
            var str = '';//用来拼接小图字符串
            for (var j in data[i].imglist) {
                str += `<img class="smpic" src="${data[i].imglist[j]}" alt="">`;
            }

            //拼接li数据
            html += `<li>
                        <div class="main">
                            <img class="bigimg" src="${data[i].imglist[0]}" alt="">
                            <span class="mark"></span>
                        </div>
                        
                        <div class="smallimg">
                            ${str}
                        </div>
                        <h4>￥${data[i].price}</h4>
                        <p><a href="###">${data[i].title}</a></p>
                        <p>
                            <span>${data[i].shopname}</span>
                            <span>${data[i].buyed}人付款</span>
                        </p>
                        <p><span>${data[i].grade}</span> </p>
                    </li>`;
        }

        list.innerHTML = html;//渲染数据到页面

        //如果你要的元素是渲染出来的，记得要先渲染后查找节点，否则找不到
        // var amains = list.getElementsByClassName('main');//大图div

        //2.鼠标移入哪个图片，哪个图片的遮罩显示
        // for (var i = 0; i < amains.length; i++) {
        //     amains[i].onmouseover = function () {
        //         var mark = this.getElementsByClassName('mark')[0];
        //         mark.style.bottom = 0;
        //     }
        //     amains[i].onmouseout = function () {
        //         var mark = this.getElementsByClassName('mark')[0];
        //         mark.style.bottom = '-38px';
        //     }
        // }

        //3.小图切换大图
        var smallimg = list.getElementsByClassName('smallimg');//集合
        for (var i = 0; i < smallimg.length; i++) {//初始化样式
            smallimg[i].children[0].className = 'smpic active';//每一个父节点的第一个孩子高亮显示
        }
        // var asmlPics = smallimg.getElementsByTagName('img');//集合
        //不能在集合里面找集合
        var asmlPics = list.getElementsByClassName('smpic');
        console.log(asmlPics.length);

        for (var i = 0; i < asmlPics.length; i++) {
            asmlPics[i].onclick = function () {
                //dom操作
                // console.log(this.src);
                //查找父节点
                // console.log(this.parentNode);//查找父节点
                // console.log(this.parentNode.previousElementSibling);//上一个兄弟节点
                // console.log(this.parentNode.previousElementSibling.children[0]);//孩子节点
                this.parentNode.previousElementSibling.children[0].src = this.src;
                for (var i = 0; i < this.parentNode.children.length; i++) {
                    this.parentNode.children[i].className = '';
                }
                this.className = 'smpic active';
            }
        }
    })();
</script>

</html>