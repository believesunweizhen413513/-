<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>编写生成4位数字验证码的函数，并显示在页面，点击重新生成验证码</title>
</head>
<body>
    验证码: <input type="text" id="tex">
   <input type="button" value="8658" id="rannum">
   <input type="button" value="提交" id="btn">
   <span id="inf"></span>
</body>
<script src="../common.js"></script>
<script>
    /*
        编写生成4位数字验证码的函数，并显示在页面，点击重新生成验证码

            需求：
                * 生成4位数的随机数显示到按钮里面:封装函数
                * 点击按钮可以切换一个新的随机数
                * 点击提交按钮的时候，获取表单的值和随机数比较，相同才是验证通过，允许提交
    */
    //找节点
    var tex = document.getElementById('tex');
    var rannum = document.getElementById('rannum');
    var btn = document.getElementById('btn');
    var inf = document.getElementById('inf');

    function setData() {
        // var num = randomCode();//返回的随机数
        var num =parseInt(Math.random()*8999+1000);
        rannum.value = num;//把第一个随机数渲染到节点里面
    }

    setData();

    rannum.onclick = function() {
        // var num = ranNum();//返回的随机数
        // rannum.value = num;//把第一个随机数渲染到节点里面
        setData();
    }

    //点击提交的时候判断是否验证码通过
    btn.onclick = function() {
        var texVal = tex.value;
        var ranVal = rannum.value;
        if(texVal.toLowerCase() == ranVal.toLowerCase()) {//忽略大小写的方式：先统一转成小写
            //验证通过
            // document.write('验证通过');
            inf.innerHTML = '验证通过';
            inf.style.color = '#58bc58';
        }else {
            inf.innerHTML = '验证不通过';
            inf.style.color = 'red';
        }
    }
</script>
</html>