<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        #texting {
            margin: auto;
            width: 350px;
            height: 40px;
            position: relative;
            overflow: hidden;
        }

        .huakuai {
            width: 71%;
            height: 83%;
            background: #ccc;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 99;
            left: -60%;
        }

        .huakuai span:nth-of-type(1) {
            display: block;
            float: left;
            width: 84%;
            height: 100%;
            background: #58bc58;
        }

        .huakuai span:nth-of-type(2) {
            display: block;
            float: left;
            width: 16%;
            height: 100%;
            background: #000;
            cursor: pointer;
            color: #fff;
            text-align: center;
            line-height: 33px;
        }

        .sp1 {
            font-size: 12px;
            font-family: microsoft yahei, serif;
            color: #787878;
            line-height: 33px;
            text-align: center;
        }

        .box {
            width: 71%;
            height: 33px;
            position: relative;
            background: #ccc;
            display: inline-block;
            line-height: 33px;
            text-align: center;
            font-family: microsoft yahei, serif;
            font-size: 12px;
        }

        .box .labelTip {
            position: absolute;
            left: 0;
            width: 100%;
            height: 100%;
            color: #787878;
            z-index: 2;
        }

        .bt1 {
            height: 33px;
            width: 50px;
            float: right;
        }

        .txtRoll {
            background-image: linear-gradient(to right, black, black, white, black, black, white, black);
            -webkit-text-fill-color: transparent;
            -webkit-background-clip: text;
            -webkit-background-size: 200% 100%;
            animation: bgp 3s infinite linear;
        }

        @-webkit-keyframes bgp {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: -100% 0;
            }
        }
    </style>

</head>

<body>
    <div id="texting">
        <div class="huakuai">
            <span class="sp1"></span><span class="sp2"></span>
        </div>
        <div class="box">
            <span class="txtRoll" class="labelTip">按住滑块，拖拽到最右边</span>
        </div>
        <input type="button" value="重置" class="bt1">
    </div>

</body>
<script>
    /*
     width: 350px;//宽度可能变化，有默认值
     height: 40px;//高度可能变化，有默认值
     ele://传进来的节点名可能变化，有默认值
    */
    slidingValidation({//配置参数
        iw: 350,
        ih: 40,
        ele: 'texting',//id
    });
    function slidingValidation(opt) {
        //默认参数
        var defaultOpt = {
            iw: 350,
            ih: 40,
            // ele: 'texting',
        }
        //有配置用配置，没有配置用默认
        Object.assign(defaultOpt, opt);//用默认参数 ：defaultOpt
        var huakuai = document.querySelector('.huakuai');
        var texting = document.querySelector('#texting');
        var box = document.querySelector('.box');
        var sp1 = document.querySelector('.sp1');
        var sp2 = document.querySelector('.sp2');
        var bt1 = document.querySelector('.bt1');
        //设置尺寸
        texting.style.width = defaultOpt.iw + 'px';
        texting.style.height = defaultOpt.ih + 'px';
        //滑块的left值
        var num = huakuai.offsetLeft;
        console.log(num);
        sp2.innerHTML = '&gt;&gt;';
        sp2.onmousedown = function (ev) {
            var isok = false; //检查是否成功
            var ix = ev.offsetX;//按下鼠标的时候获取相对距离
            // console.log(ix);
            document.onmousemove = function (ev) {
                // ev.stopPropagation();
                var l = ev.clientX - texting.offsetLeft - huakuai.offsetWidth + ix;//ev.clientX 光标相对于浏览器可视区域的位置，也就是浏览器坐标
                // console.log(huakuai.offsetLeft);
                if (l >= huakuai.offsetWidth - box.offsetWidth) {
                    l = huakuai.offsetWidth - box.offsetWidth;
                    sp1.innerHTML = '验证通过';
                    sp2.innerHTML = '√';
                    isok = true;
                }
                else if (l <= num) {
                    l = num;
                }
                huakuai.style.left = l + 'px';
            }
            document.onmouseup = function (ev) {
                ev.stopPropagation();
                document.onmousemove = null;
                if (isok) return;
                huakuai.style.left = num + 'px';
                sp2.innerHTML = '&gt;&gt;';
            }
        }
        bt1.onclick = function () {
            huakuai.style.left = num + 'px';
            sp2.innerHTML = '&gt;&gt;';
        }

    }

</script>

</html>