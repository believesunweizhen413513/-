<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>首页</title>
</head>

<body>
    <h1>首页</h1>
    <div id="welcome">欢迎你访问我们的网站。<a href="###" class="quit">退出</a></div>
</body>
<script src="../js/comm1.js"></script>
<script>
    (function () {
        //首页：退出功能
        let welcome = document.getElementById('welcome');
        // let data = decodeURI(location.search.slice(1));//把转码的中文转回来
        function undate() {
            let data = getcookie('username');
            if (data) {
                //登陆的
                welcome.innerHTML = data + ',欢迎你访问我们的网站。<a href="###" class="quit">退出</a>';
            } else {
                // 只是访问网站，没有登录
                welcome.innerHTML = '欢迎你访问我们的网站。<a href="###" class="quit">登陆</a>';
            }
        }

        undate();


        welcome.onclick = ev => {
            // quit有登录又有退出功能，所以通过内容来判断是需要退出还是登录
            if (ev.target.innerHTML == '退出') {
                //退出
                alert('退出成功');
                // 退出成功记得清空cookie里面的值
                removeCookie('username');
                removeCookie('url');
                // console.log(getcookie('username'));
                // welcome.innerHTML = '欢迎你访问我们的网站。<a href="###" class="quit">登陆</a>';
            } else if (ev.target.innerHTML == '登陆') {
                location.href = '02login.html';
            }
            undate();
        }


    })();
</script>

</html>